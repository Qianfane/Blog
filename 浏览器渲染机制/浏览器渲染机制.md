## 浏览器渲染过程

**普通版本** ![渲染整个过程.png](https://cdn.nlark.com/yuque/0/2022/png/23138217/1644655808643-81f3f3a7-2fac-4c17-af7b-7b763eabbc14.png) 

- 处理 `HTML` 并构建 `DOM` 树。
- 处理 `CSS` 构建 `CSSOM` 树。
- 将 `DOM` 与 `CSSOM` 合并成一个渲染树。
- 根据渲染树来布局，计算每个节点的位置。
- 调用 `GPU` 绘制，合成图层，显示在屏幕上

**惊艳面试官版本**



## 重排(回流)重绘

### 理解

- 重排：当渲染树中的元素的布局（如：尺寸、位置、隐藏/状态状态）发生改变时，产生重绘回流
- 重绘：当渲染树中的元素外观（如：颜色）发生改变，不影响布局时，产生重绘

### 触发条件

**重排**

- 增加、删除、修改 DOM 节点时
- 移动 `DOM` 的位置

**重绘**

- `DOM` 改动
- `CSS` 改动

### 如何最小化重绘(repaint)和重排(reflow)

- 需要创建多个 `DOM` 节点时，使用 `DocumentFragment` 创建完后一次性插入
- 使用 `visibility` 替换 `display: none`，因为前者只会引起重绘，后者会引起重排
- 不要使用 `table` 布局，可能很小的一个改动就会造成整个 `table` 的重新布局



