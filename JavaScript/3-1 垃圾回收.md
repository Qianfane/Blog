# 垃圾回收

​		`JavaScript` 是使用垃圾回收的语言，通过自动内存管理实现内存分配和闲置资源回收。基本思路是：确定哪个变量不会再使用，然后释放它所占用的内存。这个时间是周期性的，即垃圾回收程序每隔一段时间就会自动执行。

## 1.1 标记清理

理解：这是 `JavaScript` 中最常用的垃圾回收策略。

- 垃圾收集器运行时给所有变量都打上标记
- 去掉环境中的变量以及被环境中变量引用的变量的标记
- 销毁那些带标记的值并回收它们所占用的内存空间

## 1.2 引用计数

​		引用计数的含义是跟踪记录每个值被引用的次数。

```js
var objectA = new Object(); // 引用类型值 引用次数为1
var objectB = objectA; // 引用次数为2

objectA = null; // 引用次数为1
objectB = null; // 引用次数为0
```

以上面代码为例，

第一行代码，`new` 了一个新的对象，这时该值的引用计数为1；

第二行代码，把该值又赋给 `objectB`，该值的引用次数为2；

第三四行代码，`objectA` 和 `objectB` 都不指向这个值了，那么该值的引用次数就为0了。

这样子，当垃圾收集器下次运行时，就会释放这个值所占用的内存。

> **缺点**：可能造成循环引用。